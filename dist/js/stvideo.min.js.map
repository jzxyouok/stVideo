{"version":3,"sources":["stvideo.js"],"names":["root","factory","define","amd","module","exports","stVideo","global","this","window","lastTime","vendors","x","length","requestAnimationFrame","cancelAnimationFrame","callback","element","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","el","settings","useCanvas","test","navigator","userAgent","document","querySelector","defaults","force","getSettings","mp4","webm","ogg","width","height","classNames","init","error","isPlaying","isPaused","isEnded","isMuted","hasAudio","player","poster","play","playPause","controls","timeline","progress","duration","volume","eventsUserCollection","eventsVideoCollection","eventsControlsCollection","initPlayer","isError","checkSettings","prototype","attr","options","key","getAttribute","replace","JSON","parse","hasOwnProperty","format","wrapper","video","videoSource","canvas","context","classList","add","createElement","setAttribute","supportedVideoFormat","ext","badVideoFormat","call","type","appendChild","getContext","fillStyle","fillRect","drawImage","canvasContext","load","playerControls","addVideoListeners","addControlsListeners","canPlayType","videoAudio","tempEvent","self","mozHasAudio","Boolean","webkitAudioDecodedByteCount","audioTracks","elControls","elVolume","addEventListener","push","style","backgroundImage","elPlay","elPlayPause","elProgress","elDuration","canvasDrawFrame","progressUpdate","changeState","ev","custom","controlsBox","pause","canvasControl","action","currentTime","now","animationFrame","canvasFrameUpdate","bind","time","elapsed","current","toFixed","innerText","formatTime","seconds","min","sec","floor","console","msg","on","name","allowedEvents","indexOf","value","ec","remove","destroy"],"mappings":"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","file":"stvideo.min.js"}