{"version":3,"sources":["stvideo.js"],"names":["root","factory","define","amd","module","exports","stVideo","global","this","window","lastTime","vendors","x","length","requestAnimationFrame","cancelAnimationFrame","callback","element","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","el","settings","ios","test","navigator","userAgent","useCanvas","document","querySelector","defaults","force","framesPerSecond","volume","getSettings","mp4","webm","ogg","width","height","classNames","init","error","isPlaying","isPaused","isEnded","isMuted","hasAudio","player","poster","play","playPause","controls","timeline","progress","duration","eventsUserCollection","eventsVideoCollection","eventsControlsCollection","initPlayer","isError","checkSettings","prototype","attr","options","key","getAttribute","replace","JSON","parse","hasOwnProperty","format","wrapper","video","videoSource","canvas","canvasContext","classList","add","createElement","setAttribute","supportedVideoFormat","ext","badVideoFormat","call","type","appendChild","getContext","fillStyle","fillRect","drawImage","load","playerControls","addVideoListeners","addControlsListeners","canPlayType","videoAudio","tempEvent","self","mozHasAudio","Boolean","webkitAudioDecodedByteCount","audioTracks","elControls","elVolume","addEventListener","audio","currentTime","changeState","pause","push","style","backgroundImage","elPlay","elPlayPause","elProgress","elDuration","canvasAudio","canvasDrawFrame","progressUpdate","ev","custom","controlsBox","innerHTML","canvasControl","action","now","animationFrame","canvasFrameUpdate","bind","time","elapsed","current","toFixed","innerText","formatTime","seconds","min","sec","floor","console","msg","on","name","allowedEvents","indexOf","value","ec","remove","destroy"],"mappings":"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","file":"stvideo.min.js"}